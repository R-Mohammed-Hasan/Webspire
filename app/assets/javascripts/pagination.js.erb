localStorage.setItem("page","2");
if ($(".pagination").length && $(".postsContainer").length) {
localStorage.setItem("loading","false");
    $(window).scroll(function() {
        var url;
        let page_id = localStorage.getItem("page");
        url = `/?page=${page_id}`;
        if ((window.innerHeight + window.scrollY) >= document.body.scrollHeight) {
        console.log(url);
            let is_loading = localStorage.getItem("loading");
            if(is_loading == "false"){
                localStorage.setItem("loading","true");
                $.ajax({
                    url: url,
                    method: "get",
                    }).then((res) => {
                        if(res){
                            $('.postsContainer').append(res);
                        }
                        const post_contents = [...$(".post-content")]
                        post_contents.forEach(post => {
                            const classList = post.classList
                            if(!classList.contains("slick-initialized")){
                                $(post).slick({
                                    infinite: false,
                                    arrows: true,
                                    speed: 400,
                                    slidesToShow: 1,
                                    slidesToScroll: 1,
                                    swipeToSlide: true,
                                    touchMove: true,
                                    edge: true,
                                    dots: true,
                                })
                            }
                            localStorage.setItem("loading","false");
                            localStorage.setItem("page", JSON.parse(page_id)+1);
                        })
                })
            }

        }
        return;
    });
}


window.onscroll = function(ev) {
    if ((window.innerHeight + window.scrollY) >= document.body.scrollHeight) {
       console.log("bottom")
    }
};
